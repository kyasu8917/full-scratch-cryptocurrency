# P2Pネットワークをつくる
中心となるサーバーに各クライアントが接続するクライアント/サーバー型ネットワークに対し、P2Pは相互に接続されたサーバー同士がそれぞれ通信したり、各自でデータを保持したりするネットワークである。P2Pはpeer-to-peerを表す。

暗号通貨には、P2Pおような特定のプレイヤーに依存することなく成立し続けるネットワークが必要不可欠になる。

暗号通貨のためのP2Pネットワークという文脈で、実際にP2Pネットワークを構成する（サーバーとなる）部分をCoreノード、暗号通貨取引等を行うクライアントとなる（ウォレットとなる）部分をEdgeノードと呼ぶこととする。

Edgeノードは必要な時にだけTransaction（あるひとつの取引）をP2Pネットワークに対して送信するので、その際に、あるCoreノードを選んで接続することになる。

Coreノード同士がネットワーク内の全てのCoreノードの情報を記憶しているのも大変なので、一般的なP2Pネットワークではリレーノードを用意して、クラスター同士をリレーすることで全体のネットワークを構成する。（今回の実装では考慮しない）

今回の実装では、Edgeノードは接続先CoreノードのIPを指定して接続することとする。

本来の暗号通貨などで用いるP2Pネットワークでは、接続先のCoreノードが信頼できるか田舎を解決しなくてはいけない。

## P2Pネットワークの実装
1. 最初のCoreノードを起動する
2. いくつかのCoreノードを起動し、相互接続する
3. EdgeノードがCoreノードに接続する

Coreノードの機能
- Coreノードへの接続リクエストと、それに応じたCoreノード一覧への登録処理
- 離脱リクエストと、それに応じたCoreノード一覧からの削除処理
- Coreノード一覧のリクエストと、それに対するレスポンス
- P2Pネットワーク上のCoreノードの接続状況の確認
- Edgeノードからの接続リクエストの処理と、それに対するレスポンスとしてCoreノード一覧の送信
- Edgeノードからの離脱リクエストの処理

Edgeノードの機能
- Coreノードに対する接続リクエスト
- Coreノードへの離脱リクエスト
- Coreノードから送信されたCoreノード一覧の処理

ノード間の通信はソケット通信[^1]を用いる。



[^1]: https://qiita.com/megadreams14/items/32a3eed4661e55419e1c 
http://research.nii.ac.jp/~ichiro/syspro98/socket.html
